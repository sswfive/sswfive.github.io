<!DOCTYPE html>
<html lang="en">
    
    <head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="å­è¿›ç¨‹ç®¡ç†å·¥å…·ä¹‹subprocess" />
    <meta name="hexo-theme-A4" content="v1.9.7" />
    <link rel="alternate icon" type="image/webp" href="/images/head.png">
    <title>WSShen</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>
    
    

    
    



    

    
    

    
    
    
    <!-- æ·»åŠ å…¨å±€æœç´¢ç›¸å…³çš„æ ·å¼å’Œè„šæœ¬ -->
    <link rel="stylesheet" href="/css/custom.css">
    <script src="/js/custom-search.js"></script>
    
    <body>
        <!-- hexo-inject:begin --><!-- hexo-inject:end --><script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 0; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/images/head.png" 
        />
        <div class="header-content">
            <a class="logo" href="/">WSShen</a> 
            <span class="description"></span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/about/">å…³äº</a></li>
            
        
            
                <li><a href="/tags/">æ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
            
                <li><a href="/search/">æœç´¢</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    å­è¿›ç¨‹ç®¡ç†å·¥å…·ä¹‹subprocess
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2025-03-17</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š4.5k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š19åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%A8%A1%E5%9D%97%E6%A6%82%E8%BF%B0"><span class="post-toc-text">æ¨¡å—æ¦‚è¿°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="post-toc-text">ä»‹ç»ï¼š</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0"><span class="post-toc-text">ç‰ˆæœ¬æ›´æ–°</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="post-toc-text">åº”ç”¨åœºæ™¯</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%89%A7%E8%A1%8C%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4"><span class="post-toc-text">æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%B0%83%E7%94%A8%E5%85%B6%E4%BB%96%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E6%88%96%E8%84%9A%E6%9C%AC"><span class="post-toc-text">è°ƒç”¨å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%B8%8E%E5%85%B6%E4%BB%96%E7%9A%84%E8%BF%9B%E7%A8%8B%E4%BA%A4%E4%BA%92"><span class="post-toc-text">ä¸å…¶ä»–çš„è¿›ç¨‹äº¤äº’</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1"><span class="post-toc-text">å®ç°å¼‚æ­¥ä»»åŠ¡</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%9B%BF%E4%BB%A3os-system"><span class="post-toc-text">æ›¿ä»£os.system()</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%B8%B8%E7%94%A8%E6%8E%A5%E5%8F%A3"><span class="post-toc-text">å¸¸ç”¨æ¥å£</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%87%8D%E8%A6%81%E6%8E%A5%E5%8F%A3"><span class="post-toc-text">é‡è¦æ¥å£</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%A0%B8%E5%BF%83%E6%8E%A5%E5%8F%A3%E5%88%86%E6%9E%90%E4%B9%8Bsubprocess-run"><span class="post-toc-text">æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess.run()</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%87%BD%E6%95%B0%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="post-toc-text">å‡½æ•°ç‰¹ç‚¹ï¼š</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%87%8D%E8%A6%81%E5%8F%82%E6%95%B0%EF%BC%9Aargs"><span class="post-toc-text">é‡è¦å‚æ•°ï¼šargs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%87%8D%E8%A6%81%E5%8F%82%E6%95%B0%EF%BC%9Astdin%E3%80%81stdout%E3%80%81sterr"><span class="post-toc-text">é‡è¦å‚æ•°ï¼šstdinã€stdoutã€sterr</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="post-toc-text">ä½¿ç”¨ç¤ºä¾‹</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%A0%B8%E5%BF%83%E6%8E%A5%E5%8F%A3%E5%88%86%E6%9E%90%E4%B9%8Bsubprocess-Popen"><span class="post-toc-text">æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess.Popen()</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%87%BD%E6%95%B0%E7%89%B9%E7%82%B9%EF%BC%9A-1"><span class="post-toc-text">å‡½æ•°ç‰¹ç‚¹ï¼š</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%87%8D%E8%A6%81%E5%B1%9E%E6%80%A7-Popen%E5%AF%B9%E8%B1%A1"><span class="post-toc-text">é‡è¦å±æ€§-Popenå¯¹è±¡</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-1"><span class="post-toc-text">ä½¿ç”¨ç¤ºä¾‹</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#subprocess%E5%B8%B8%E7%94%A8%E5%BC%82%E5%B8%B8%E7%B1%BB"><span class="post-toc-text">subprocesså¸¸ç”¨å¼‚å¸¸ç±»</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SubprocessError"><span class="post-toc-text">SubprocessError</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#TimeoutExpired"><span class="post-toc-text">TimeoutExpired</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CalledProcessError"><span class="post-toc-text">CalledProcessError</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%AE%9E%E8%B7%B5%E6%A1%88%E4%BE%8B"><span class="post-toc-text">å®è·µæ¡ˆä¾‹</span></a></li></ol>
            
        
        <div class=".article-gallery"><blockquote>
<p>Referenceï¼š<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html">å®˜æ–¹æ–‡æ¡£</a></p>
</blockquote>
<h2 id="æ¨¡å—æ¦‚è¿°"><a href="#æ¨¡å—æ¦‚è¿°" class="headerlink" title="æ¨¡å—æ¦‚è¿°"></a>æ¨¡å—æ¦‚è¿°</h2><h3 id="ä»‹ç»ï¼š"><a href="#ä»‹ç»ï¼š" class="headerlink" title="ä»‹ç»ï¼š"></a>ä»‹ç»ï¼š</h3><p>subprocessæ˜¯Pythonå†…ç½®åº“ä¸­ç”¨äºç®¡ç†å­è¿›ç¨‹çš„æ¨¡å—ï¼Œæ”¯æŒåœ¨Windowsã€Linuxã€MacOSå¹³å°ä¸­ä½¿ç”¨ï¼› </p>
<p>è¯¥æ¨¡å—é€šè¿‡åˆ›å»ºå¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œç³»ç»Ÿçº§å‘½ä»¤ã€è°ƒç”¨å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬ã€ä¸å…¶ä»–è¿›ç¨‹è¿›è¡Œäº¤äº’ç­‰ç­‰ï¼›å…¶ä¸»è¦é€šè¿‡ç®¡é“æŠ€æœ¯è¿æ¥è¿›ç¨‹é—´çš„è¾“å…¥&#x2F;è¾“å‡º&#x2F;é”™è¯¯ç®¡é“ï¼Œä»è€Œè·å¾—è¿”å›å€¼ã€‚</p>
<p>åœ¨subprocessæ¨¡å—å‘å¸ƒåï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨è¯¥æ¨¡å—å»æ›¿æ¢æ ‡å‡†åº“ä¸­çš„os.system()ã€os.spawn*()ç­‰æ–¹æ³•å»æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼›</p>
<h3 id="ç‰ˆæœ¬æ›´æ–°"><a href="#ç‰ˆæœ¬æ›´æ–°" class="headerlink" title="ç‰ˆæœ¬æ›´æ–°"></a>ç‰ˆæœ¬æ›´æ–°</h3><ol>
<li>subprocessæ˜¯python2.4ä¸­æ–°å¢çš„æ¨¡å—ï¼›</li>
<li>åœ¨python3.5ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡subprocess.call()ï¼Œsubprocess.getoutput()ã€subprocess.check_output()ç­‰ç­‰æ–¹æ³•å®ç°æ¨¡å—åŠŸèƒ½ï¼›</li>
<li>åœ¨python3.5ä¹‹åï¼Œæ–°å¢subprocess.run()æ–¹æ³•ï¼Œå¹¶ä¸”å®˜æ–¹æ–‡æ¡£å»ºè®®é€šè¿‡subprocess.run()æˆ–è€…subprocess.Popen()æ¥æ›¿æ¢åŸæœ‰çš„è€ç‰ˆæœ¬çš„åŠŸèƒ½å‡½æ•°ï¼›</li>
</ol>
<h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><h3 id="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤"><a href="#æ‰§è¡Œç³»ç»Ÿå‘½ä»¤" class="headerlink" title="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤"></a>æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</h3><ul>
<li>åœ¨ç¨‹åºå†…éƒ¨æ‰§è¡Œç³»ç»Ÿçº§å‘½ä»¤ï¼Œå¦‚lsã€killã€mkdirã€awkç­‰ï¼Œå¯ä»¥ä½¿ç”¨subprocesså®ç°ï¼›</li>
</ul>
<h3 id="è°ƒç”¨å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬"><a href="#è°ƒç”¨å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬" class="headerlink" title="è°ƒç”¨å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬"></a>è°ƒç”¨å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬</h3><ul>
<li>åœ¨ç¨‹åºå†…éƒ¨æ‰§è¡Œå…¶ä»–çš„æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬ï¼Œå¯ä»¥ä½¿ç”¨subprocesså®ç°ï¼›</li>
</ul>
<h3 id="ä¸å…¶ä»–çš„è¿›ç¨‹äº¤äº’"><a href="#ä¸å…¶ä»–çš„è¿›ç¨‹äº¤äº’" class="headerlink" title="ä¸å…¶ä»–çš„è¿›ç¨‹äº¤äº’"></a>ä¸å…¶ä»–çš„è¿›ç¨‹äº¤äº’</h3><ul>
<li>åœ¨éœ€è¦ä¸å…¶ä»–è¿›ç¨‹è¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚å‘æŸä¸ªè¿›ç¨‹å‘é€æ•°æ®ã€ä»æŸä¸ªè¿›ç¨‹è¯»å–æ•°æ®ç­‰ï¼Œå¯ä»¥ä½¿ç”¨subprocesså®ç°ï¼›</li>
</ul>
<h3 id="å®ç°å¼‚æ­¥ä»»åŠ¡"><a href="#å®ç°å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="å®ç°å¼‚æ­¥ä»»åŠ¡"></a>å®ç°å¼‚æ­¥ä»»åŠ¡</h3><ul>
<li>åœ¨ç¨‹åºå†…éƒ¨ä¸­éœ€è¦å®ç°å¼‚æ­¥ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨subprocesså®ç°ï¼›</li>
</ul>
<h3 id="æ›¿ä»£os-system"><a href="#æ›¿ä»£os-system" class="headerlink" title="æ›¿ä»£os.system()"></a>æ›¿ä»£os.system()</h3><ul>
<li>ä¸æƒ³ä½¿ç”¨os.system()æˆ–os.system()æ— æ³•å®ç°éœ€æ±‚æ—¶ï¼Œå¯ä»¥subprocesså®ç°ï¼›</li>
</ul>
<h2 id="å¸¸ç”¨æ¥å£"><a href="#å¸¸ç”¨æ¥å£" class="headerlink" title="å¸¸ç”¨æ¥å£"></a>å¸¸ç”¨æ¥å£</h2><h3 id="é‡è¦æ¥å£"><a href="#é‡è¦æ¥å£" class="headerlink" title="é‡è¦æ¥å£"></a>é‡è¦æ¥å£</h3><table>
<thead>
<tr>
<th><strong>æ¥å£ç±»åˆ«</strong></th>
<th><strong>æ¥å£æ–¹æ³•å</strong></th>
<th><strong>åŠŸèƒ½æè¿°</strong></th>
<th><strong>è¿”å›ç»“æœ</strong></th>
</tr>
</thead>
<tbody><tr>
<td>é«˜é˜¶æ¥å£</td>
<td>subprocess.run()</td>
<td>æ‰§è¡Œå‘½ä»¤å¹¶ç­‰å¾…å‘½ä»¤å®Œæˆï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†å‘½ä»¤çš„è¾“å‡ºä¿¡æ¯</td>
<td>é˜»å¡ç­‰å¾…ï¼›è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«çŠ¶æ€ç ã€è¾“å‡ºä¿¡æ¯ï¼ˆstdin&#x2F;stdout&#x2F;stderrï¼‰</td>
</tr>
<tr>
<td>ç­‰å±‚æ¥å£</td>
<td>subprocess.Popen()</td>
<td>æ‰§è¡Œå‘½ä»¤ä¸ç­‰å¾…å®Œæˆï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡</td>
<td>éé˜»å¡ç­‰å¾…ï¼›è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«çŠ¶æ€ç ã€è¾“å‡ºä¿¡æ¯ï¼ˆstdin&#x2F;stdout&#x2F;stderrï¼‰</td>
</tr>
<tr>
<td>ä½ç‰ˆæœ¬æ¥å£ï¼ˆåŸºæœ¬å·²è¢«é«˜é˜¶çš„run()æ–¹æ³•æ›¿ä»£äº†ï¼‰</td>
<td>subprocess.call()</td>
<td>æ‰§è¡Œå‘½ä»¤ï¼Œè¿”å›å‘½ä»¤çš„ç»“æœå’Œæ‰§è¡ŒçŠ¶æ€</td>
<td>é˜»å¡ç­‰å¾…ï¼›0æˆ–è€…é0</td>
</tr>
<tr>
<td></td>
<td>subprocess.check_call()</td>
<td>æ‰§è¡Œå‘½ä»¤ï¼Œè¿”å›ç»“æœå’ŒçŠ¶æ€</td>
<td>é˜»å¡ç­‰å¾…ï¼›æ­£å¸¸ä¸º0 ï¼Œæ‰§è¡Œé”™è¯¯åˆ™æŠ›å‡ºå¼‚å¸¸</td>
</tr>
<tr>
<td></td>
<td>subprocess.getstatusoutput()</td>
<td>æ¥å—å­—ç¬¦ä¸²å½¢å¼çš„å‘½ä»¤ï¼Œè¿”å› ä¸€ä¸ªå…ƒç»„å½¢å¼çš„ç»“æœï¼Œ</td>
<td>é˜»å¡ç­‰å¾…ï¼›ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å‘½ä»¤æ‰§è¡ŒçŠ¶æ€ï¼Œç¬¬äºŒä¸ªä¸ºæ‰§è¡Œç»“æœã€‚</td>
</tr>
<tr>
<td></td>
<td>subprocess.getoutput()</td>
<td>æ¥æ”¶å­—ç¬¦ä¸²å½¢å¼çš„å‘½ä»¤ï¼Œè¿”å›ç»“æœ</td>
<td>é˜»å¡ç­‰å¾…ï¼›è¿”å›æ‰§è¡Œç»“æœ</td>
</tr>
<tr>
<td></td>
<td>subprocess.check_output()</td>
<td>æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚ä½•æ‰§è¡ŒçŠ¶æ€ç ä¸º0åˆ™è¿”å›å‘½ä»¤çš„ç»“æœï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸</td>
<td>é˜»å¡ç­‰å¾…ï¼›0æˆ–æŠ›å‡ºå¼‚å¸¸</td>
</tr>
</tbody></table>
<h2 id="æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess-run"><a href="#æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess-run" class="headerlink" title="æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess.run()"></a>æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess.run()</h2><h3 id="å‡½æ•°ç‰¹ç‚¹ï¼š"><a href="#å‡½æ•°ç‰¹ç‚¹ï¼š" class="headerlink" title="å‡½æ•°ç‰¹ç‚¹ï¼š"></a>å‡½æ•°ç‰¹ç‚¹ï¼š</h3><ul>
<li>è¾“å…¥ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå­è¿›ç¨‹ä¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„è®¾ç½®ï¼Œä¼šå°†è¾“å‡ºæ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Š</li>
<li>è¾“å‡ºï¼šé˜»å¡ç­‰å¾…ï¼Œæ‰§è¡ŒæˆåŠŸreturncodeä¸º0ï¼Œ é0ï¼Œè¡¨ç¤ºæ‰§è¡Œå¼‚å¸¸</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">subprocess.run(</span><br><span class="line">    args,   <span class="comment"># è¦æ‰§è¡Œçš„shellå‘½ä»¤ï¼Œé»˜è®¤åº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—ï¼Œå¦‚[â€˜dfâ€™, â€˜-Thâ€™]æˆ–(â€˜dfâ€™, â€˜-Thâ€™)ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚â€™df -Thâ€™ï¼Œä½†æ˜¯æ­¤æ—¶éœ€è¦æŠŠshellå‚æ•°çš„å€¼ç½®ä¸ºTrueï¼›</span></span><br><span class="line">    *, </span><br><span class="line">    stdin=<span class="literal">None</span>, <span class="comment"># å­è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€‚æœ‰ä¸‰ä¸ªå‚æ•°å¯é€‰ï¼šsubprocess.PIPE åˆ›å»ºä¸€ä¸ªç®¡é“ï¼Œå…è®¸ä¸å­è¿›ç¨‹è¿›è¡Œé€šä¿¡ï¼›subprocess.DEVNULL ç‰¹æ®Šçš„æ–‡ä»¶å¯¹è±¡ï¼Œå¯ä»¥å°†å…¶ç”¨äºä¸¢å¼ƒå­è¿›ç¨‹çš„è¾“å‡ºï¼›ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶å¯¹è±¡ï¼Œå°†å†…å®¹å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">input</span>=<span class="literal">None</span>, <span class="comment"># å°†å‚æ•°ä¼ é€’ç»™ Popen.communicate() ä»¥åŠå­è¿›ç¨‹çš„ stdin,å…è®¸å°†å­—èŠ‚æˆ–å­—ç¬¦ä¸²ä¼ é€’ç»™å­è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥(stdin);</span></span><br><span class="line">    stdout=<span class="literal">None</span>, <span class="comment"># å­è¿›ç¨‹çš„æ ‡å‡†è¾“å‡º(stdout);</span></span><br><span class="line">    stderr=<span class="literal">None</span>, <span class="comment"># å­è¿›ç¨‹çš„æ ‡å‡†é”™è¯¯(stderr);</span></span><br><span class="line">    capture_output=<span class="literal">False</span>, <span class="comment">#å‚æ•°æ§åˆ¶æ˜¯å¦æ•è·å¤–éƒ¨å‘½ä»¤çš„æ ‡å‡†è¾“å‡º(stdout)å’Œæ ‡å‡†é”™è¯¯(stderr)ã€‚å¦‚æœå°†å…¶è®¾ç½®ä¸ºTrueï¼Œrun()å‡½æ•°å°†è¿”å›ä¸€ä¸ªCompletedProcesså¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰stdoutå’Œstderrå±æ€§ï¼Œåˆ†åˆ«å­˜å‚¨äº†å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºã€‚å¦‚æœè®¾ç½®ä¸ºFalseï¼Œæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯å°†è¢«å‘é€åˆ°æ§åˆ¶å°ã€‚é»˜è®¤ä¸ºFalse</span></span><br><span class="line">    shell=<span class="literal">False</span>,  <span class="comment"># æŒ‡å®šæ˜¯å¦é€šè¿‡shellæ¥æ‰§è¡Œå‘½ä»¤ã€‚å¦‚æœä¸ºTrueï¼Œå‘½ä»¤å°†åœ¨shellä¸­æ‰§è¡Œï¼›å¦‚æœä¸ºFalseï¼Œåˆ™ç›´æ¥è°ƒç”¨å¯æ‰§è¡Œæ–‡ä»¶ï¼›</span></span><br><span class="line">    cwd=<span class="literal">None</span>,  <span class="comment"># è®¾ç½®å­è¿›ç¨‹çš„å·¥ä½œç›®å½•ã€‚é»˜è®¤ä¸ºNoneï¼Œè¡¨ç¤ºä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ï¼›</span></span><br><span class="line">    timeout=<span class="literal">None</span>, <span class="comment">#è®¾ç½®å­è¿›ç¨‹çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚å¦‚æœå­è¿›ç¨‹åœ¨æŒ‡å®šçš„æ—¶é—´å†…æ²¡æœ‰è¿è¡Œå®Œæˆï¼Œåˆ™ä¼šå¼•å‘TimeoutExpiredå¼‚å¸¸ï¼›</span></span><br><span class="line">    check=<span class="literal">False</span>, <span class="comment"># è®¾ç½®æ˜¯å¦æ£€æŸ¥å­è¿›ç¨‹çš„è¿”å›ç ã€‚å¦‚æœä¸ºTrueï¼Œå¹¶ä¸”å­è¿›ç¨‹çš„è¿”å›ç ä¸ä¸ºé›¶ï¼Œåˆ™ä¼šå¼•å‘CalledProcessErrorå¼‚å¸¸ï¼›</span></span><br><span class="line">    encoding=<span class="literal">None</span>, <span class="comment"># é»˜è®¤æ˜¯å­—èŠ‚æ•°æ®ï¼Œå¦‚æœæŒ‡å®šäº†ç¼–ç æ ¼å¼ï¼Œåˆ™è¾“å‡ºä¸ºå­—ç¬¦ä¸²ï¼›</span></span><br><span class="line">    errors=<span class="literal">None</span>, <span class="comment"># è¯¥å‚æ•°å®šä¹‰åœ¨è§£ç è¾“å‡ºæ—¶å¦‚ä½•å¤„ç†ç¼–ç é”™è¯¯ï¼Œå¸¸ç”¨çš„å€¼åŒ…æ‹¬&quot;strict&quot; (é»˜è®¤å€¼ï¼ŒæŠ›å‡ºå¼‚å¸¸)ã€&quot;ignore&quot; (å¿½ç•¥é”™è¯¯å­—ç¬¦) å’Œ &quot;replace&quot; (ç”¨æ›¿ä»£å­—ç¬¦ä»£æ›¿é”™è¯¯å­—ç¬¦);</span></span><br><span class="line">    text=<span class="literal">None</span>,  <span class="comment"># æŒ‡å®šæ˜¯å¦å°†è¾“å‡ºç»“æœä»¥æ–‡æœ¬å½¢å¼è¿”å›ã€‚å¦‚æœä¸ºTrueï¼Œåˆ™ç»“æœä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ï¼ŒåŒæ—¶inputæˆ–è€…stdinå‚æ•°ä¹Ÿéœ€è¦è¾“å…¥Stringï¼›å¦‚æœä¸ºFalseï¼Œåˆ™è¿”å›å­—èŠ‚æµã€‚é»˜è®¤ä¸ºFalseã€‚</span></span><br><span class="line">    env=<span class="literal">None</span>, <span class="comment"># è¯¥å‚æ•°å…è®¸æ‚¨ä¸ºå­è¿›ç¨‹æŒ‡å®šç¯å¢ƒå˜é‡ã€‚å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªå­—å…¸ç±»å‹çš„å¯¹è±¡ï¼Œå…¶ä¸­é”®æ˜¯ç¯å¢ƒå˜é‡çš„åç§°ï¼Œå€¼æ˜¯ç¯å¢ƒå˜é‡çš„å€¼ã€‚é€šè¿‡è®¾ç½®envå‚æ•°ï¼Œå¯ä»¥åœ¨å­è¿›ç¨‹ä¸­ä½¿ç”¨ç‰¹å®šçš„ç¯å¢ƒå˜é‡ã€‚</span></span><br><span class="line">    universal_newlines=<span class="literal">None</span>, <span class="comment"># è¯¥å‚æ•°å½±å“çš„æ˜¯è¾“å…¥ä¸è¾“å‡ºçš„æ•°æ®æ ¼å¼ï¼Œæ¯”å¦‚å®ƒçš„å€¼é»˜è®¤ä¸ºFalseï¼Œæ­¤æ—¶stdoutå’Œstderrçš„è¾“å‡ºæ˜¯å­—èŠ‚åºåˆ—ï¼›å½“è¯¥å‚æ•°çš„å€¼è®¾ç½®ä¸ºTrueæ—¶ï¼Œstdoutå’Œstderrçš„è¾“å‡ºæ˜¯å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">    **other_popen_kwargs</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="é‡è¦å‚æ•°ï¼šargs"><a href="#é‡è¦å‚æ•°ï¼šargs" class="headerlink" title="é‡è¦å‚æ•°ï¼šargs"></a>é‡è¦å‚æ•°ï¼šargs</h3><ul>
<li>å¯ä»¥æ¥æ”¶ä¸¤ç§æ–¹æ³•ï¼šå­—ç¬¦ä¸²æˆ–åˆ—è¡¨ã€‚</li>
<li>ä½¿ç”¨åˆ—è¡¨å½¢å¼subprocess.run([â€œlsâ€, â€œ-alâ€])</li>
<li>ä½¿ç”¨å­—ç¬¦ä¸²å½¢å¼ subprocess.run(â€œls -alâ€, shell&#x3D;True)ã€‚ä½¿ç”¨å­—ç¬¦ä¸²å½¢å¼å¿…é¡»è®¾ç½®å‚æ•°shell&#x3D;True</li>
</ul>
<h3 id="é‡è¦å‚æ•°ï¼šstdinã€stdoutã€sterr"><a href="#é‡è¦å‚æ•°ï¼šstdinã€stdoutã€sterr" class="headerlink" title="é‡è¦å‚æ•°ï¼šstdinã€stdoutã€sterr"></a>é‡è¦å‚æ•°ï¼šstdinã€stdoutã€sterr</h3><ul>
<li>ç”¨æ¥è®¾ç½®æ ‡å‡†è¾“å…¥ï¼Œæ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå­è¿›ç¨‹ä¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„è®¾ç½®ï¼Œä¼šå°†è¾“å‡ºæ˜¾ç¤ºåœ¨æ§åˆ¶å°ï¼›</li>
<li>subprocess.PIPE åˆ›å»ºä¸€ä¸ªç®¡é“ï¼Œå…è®¸ä¸å­è¿›ç¨‹è¿›è¡Œé€šä¿¡ï¼›</li>
<li>subprocess.DEVNULL ç‰¹æ®Šçš„æ–‡ä»¶å¯¹è±¡ï¼Œå¯ä»¥å°†å…¶ç”¨äºä¸¢å¼ƒå­è¿›ç¨‹çš„è¾“å‡º</li>
<li>ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶å¯¹è±¡ï¼Œå°†å†…å®¹å†™å…¥æ–‡ä»¶</li>
</ul>
<h3 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: subprocess.run(<span class="string">&quot;ls -al&quot;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">total <span class="number">16</span></span><br><span class="line">drwxr-xr-x   <span class="number">3</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">55</span> .</span><br><span class="line">drwxr-xr-x. <span class="number">14</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">17</span>:<span class="number">37</span> ..</span><br><span class="line">-rw-r--r--   <span class="number">1</span> root root    <span class="number">0</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:08 find_big_file.log</span><br><span class="line">-rwxr-xr-x   <span class="number">1</span> root root <span class="number">1453</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">00</span> find_big_file.sh</span><br><span class="line">drwxr-xr-x   <span class="number">2</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">56</span> shell_demo</span><br><span class="line">Out[<span class="number">3</span>]: CompletedProcess(args=<span class="string">&#x27;ls -al&#x27;</span>, returncode=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: subprocess.run([<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-al&quot;</span>])</span><br><span class="line">total <span class="number">16</span></span><br><span class="line">drwxr-xr-x   <span class="number">3</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">55</span> .</span><br><span class="line">drwxr-xr-x. <span class="number">14</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">17</span>:<span class="number">37</span> ..</span><br><span class="line">-rw-r--r--   <span class="number">1</span> root root    <span class="number">0</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:08 find_big_file.log</span><br><span class="line">-rwxr-xr-x   <span class="number">1</span> root root <span class="number">1453</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">00</span> find_big_file.sh</span><br><span class="line">drwxr-xr-x   <span class="number">2</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">56</span> shell_demo</span><br><span class="line">Out[<span class="number">4</span>]: CompletedProcess(args=[<span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;-al&#x27;</span>], returncode=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: subprocess.run([<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-l&quot;</span>, <span class="string">&quot;/dev/null&quot;</span>], capture_output=<span class="literal">True</span>)</span><br><span class="line">Out[<span class="number">5</span>]: CompletedProcess(args=[<span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;-l&#x27;</span>, <span class="string">&#x27;/dev/null&#x27;</span>], returncode=<span class="number">0</span>, stdout=<span class="string">b&#x27;crw-rw-rw- 1 experiment root 1, 3 2023-07-19 15:53:04 /dev/null\n&#x27;</span>, stderr=<span class="string">b&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: res = subprocess.run([<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-al&quot;</span>])</span><br><span class="line">total <span class="number">16</span></span><br><span class="line">drwxr-xr-x   <span class="number">3</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">55</span> .</span><br><span class="line">drwxr-xr-x. <span class="number">14</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">17</span>:<span class="number">37</span> ..</span><br><span class="line">-rw-r--r--   <span class="number">1</span> root root    <span class="number">0</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:08 find_big_file.log</span><br><span class="line">-rwxr-xr-x   <span class="number">1</span> root root <span class="number">1453</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">00</span> find_big_file.sh</span><br><span class="line">drwxr-xr-x   <span class="number">2</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">56</span> shell_demo</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: res.returncode</span><br><span class="line">Out[<span class="number">7</span>]: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: res = subprocess.run([<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-al&quot;</span>,<span class="string">&quot;./cmd_output&quot;</span>], stdout=subprocess.PIPE)</span><br><span class="line">ls: cannot access ./cmd_output: No such file <span class="keyword">or</span> directory</span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: res = subprocess.run([<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-al&quot;</span>,<span class="string">&quot;./&quot;</span>], stdout=subprocess.PIPE)</span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: res.stdout</span><br><span class="line">Out[<span class="number">10</span>]: <span class="string">b&#x27;total 16\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:18:55 .\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\n&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: res = subprocess.run([<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-al&quot;</span>,<span class="string">&quot;./&quot;</span>], stdout=subprocess.PIPE, text=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: res.stdout</span><br><span class="line">Out[<span class="number">12</span>]: <span class="string">&#x27;total 16\ndrwxr-xr-x   3 root root 4096 2024-01-12 16:18:55 .\ndrwxr-xr-x. 14 root root 4096 2024-01-12 16:17:37 ..\n-rw-r--r--   1 root root    0 2024-01-12 16:18:08 find_big_file.log\n-rwxr-xr-x   1 root root 1453 2024-01-12 16:18:00 find_big_file.sh\ndrwxr-xr-x   2 root root 4096 2024-01-12 16:18:56 shell_demo\n&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;cmd_output.txt&quot;</span>, <span class="string">&quot;a+&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    ...:     res = subprocess.run([<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-al&quot;</span>,<span class="string">&quot;./&quot;</span>], stdout=f, text=<span class="literal">True</span>)</span><br><span class="line">    ...:     <span class="built_in">print</span>(<span class="string">f&quot;code:<span class="subst">&#123;res.returncode&#125;</span>&quot;</span>)</span><br><span class="line">    ...:     <span class="built_in">print</span>(<span class="string">f&quot;stdout: <span class="subst">&#123;res.stdout&#125;</span>&quot;</span>)</span><br><span class="line">    ...: </span><br><span class="line">code:<span class="number">0</span></span><br><span class="line">stdout: <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: ls</span><br><span class="line">cmd_output.txt  find_big_file.log  find_big_file.sh*  shell_demo/</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: res = subprocess.run([<span class="string">&quot;cat&quot;</span>,<span class="string">&quot;cmd_output.txt&quot;</span>])</span><br><span class="line">total <span class="number">16</span></span><br><span class="line">drwxr-xr-x   <span class="number">3</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">27</span>:<span class="number">11</span> .</span><br><span class="line">drwxr-xr-x. <span class="number">14</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">17</span>:<span class="number">37</span> ..</span><br><span class="line">-rw-r--r--   <span class="number">1</span> root root    <span class="number">0</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">27</span>:<span class="number">11</span> cmd_output.txt</span><br><span class="line">-rw-r--r--   <span class="number">1</span> root root    <span class="number">0</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:08 find_big_file.log</span><br><span class="line">-rwxr-xr-x   <span class="number">1</span> root root <span class="number">1453</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">00</span> find_big_file.sh</span><br><span class="line">drwxr-xr-x   <span class="number">2</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">56</span> shell_demo</span><br><span class="line">total <span class="number">20</span></span><br><span class="line">drwxr-xr-x   <span class="number">3</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">27</span>:<span class="number">11</span> .</span><br><span class="line">drwxr-xr-x. <span class="number">14</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">17</span>:<span class="number">37</span> ..</span><br><span class="line">-rw-r--r--   <span class="number">1</span> root root  <span class="number">375</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">27</span>:<span class="number">11</span> cmd_output.txt</span><br><span class="line">-rw-r--r--   <span class="number">1</span> root root    <span class="number">0</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:08 find_big_file.log</span><br><span class="line">-rwxr-xr-x   <span class="number">1</span> root root <span class="number">1453</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">00</span> find_big_file.sh</span><br><span class="line">drwxr-xr-x   <span class="number">2</span> root root <span class="number">4096</span> <span class="number">2024</span>-01-<span class="number">12</span> <span class="number">16</span>:<span class="number">18</span>:<span class="number">56</span> shell_demo</span><br></pre></td></tr></table></figure>
<h2 id="æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess-Popen"><a href="#æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess-Popen" class="headerlink" title="æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess.Popen()"></a>æ ¸å¿ƒæ¥å£åˆ†æä¹‹subprocess.Popen()</h2><h3 id="å‡½æ•°ç‰¹ç‚¹ï¼š-1"><a href="#å‡½æ•°ç‰¹ç‚¹ï¼š-1" class="headerlink" title="å‡½æ•°ç‰¹ç‚¹ï¼š"></a>å‡½æ•°ç‰¹ç‚¹ï¼š</h3><ul>
<li><strong>run()æ–¹æ³•åº•å±‚è°ƒç”¨çš„æ˜¯Popen()æ–¹æ³•ï¼Œå½“runæ–¹æ³•æ— æ³•æ»¡è¶³éœ€æ±‚æ˜¯ï¼Œä½¿ç”¨Popen()æ–¹æ³•å»å®ç°ï¼›</strong></li>
<li>è¾“å…¥ï¼šæ‰§è¡Œçš„å‘½ä»¤</li>
<li>è¾“å‡ºï¼šéé˜»å¡è¾“å‡ºï¼Œæ‰§è¡Œåç«‹å³è¿”å›ï¼Œæ‰§è¡Œç»“æœé€šè¿‡è¿”å›å¯¹è±¡è·å–</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">subprocess.Popen(</span><br><span class="line">    args,  <span class="comment">#åŒrun()æ–¹æ³•</span></span><br><span class="line">    bufsize=- <span class="number">1</span>, <span class="comment"># å®šä¹‰å­è¿›ç¨‹çš„ç¼“å†²å¤§å°ï¼Œé»˜è®¤å€¼-1è¡¨ç¤ºä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„ç¼“å†²å¤§å°ï¼›</span></span><br><span class="line">    executable=<span class="literal">None</span>, <span class="comment"># æŒ‡å®šè¦æ‰§è¡Œçš„ç¨‹åºè·¯å¾„ï¼Œè‹¥æœªæŒ‡å®šï¼Œåˆ™é€šè¿‡PATHç¯å¢ƒå˜é‡æ¥ç¡®å®šå¯æ‰§è¡Œæ–‡ä»¶ä½ç½®ï¼›</span></span><br><span class="line">    stdin=<span class="literal">None</span>, <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    stdout=<span class="literal">None</span>, <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    stderr=<span class="literal">None</span>, <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    preexec_fn=<span class="literal">None</span>, <span class="comment"># æŒ‡å®šåœ¨å­è¿›ç¨‹å¯åŠ¨ä¹‹å‰è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨fork()è°ƒç”¨æˆåŠŸï¼Œåœ¨exec()è°ƒç”¨ä¹‹å‰è¢«è°ƒç”¨ï¼›</span></span><br><span class="line">    close_fds=<span class="literal">True</span>, <span class="comment"># æŒ‡å®šæ˜¯å¦å…³é—­æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œ</span></span><br><span class="line">    shell=<span class="literal">False</span>, <span class="comment"># # åŒrun()æ–¹æ³•</span></span><br><span class="line">    cwd=<span class="literal">None</span>, <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    env=<span class="literal">None</span>, <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    universal_newlines=<span class="literal">None</span>, <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    startupinfo=<span class="literal">None</span>, <span class="comment"># ä¸€ä¸ªå¯é€‰çš„subprocess.STARTUPINFOå¯¹è±¡ï¼Œç”¨äºæŒ‡å®šå­è¿›ç¨‹çš„å¯åŠ¨ä¿¡æ¯ï¼Œå¦‚çª—å£å¤§å°ã€çª—å£æ ‡é¢˜ç­‰</span></span><br><span class="line">    creationflags=<span class="number">0</span>, <span class="comment"># ç”¨äºæŒ‡å®šå­è¿›ç¨‹çš„åˆ›å»ºæ ‡å¿—ï¼Œæ§åˆ¶å­è¿›ç¨‹çš„å„ç§è¡Œä¸ºã€‚å¯ä»¥ä½¿ç”¨subprocess.CREATE_NEW_CONSOLEã€subprocess.CREATE_NEW_PROCESS_GROUPç­‰å¸¸é‡è¿›è¡Œè®¾ç½®</span></span><br><span class="line">    restore_signals=<span class="literal">True</span>, <span class="comment"># ç”¨äºç¡®å®šæ˜¯å¦åœ¨å­è¿›ç¨‹ä¸­æ¢å¤ä¿¡å·å¤„ç†ç¨‹åºçš„é»˜è®¤è¡Œä¸º</span></span><br><span class="line">    start_new_session=<span class="literal">False</span>, <span class="comment"># ç”¨äºä»£æ›¿ä½¿ç”¨ preexec_fn çš„ä»£ç æ¥åœ¨å­è¿›ç¨‹ä¸­è°ƒç”¨ os.setsid() æˆ– os.setpgid()ï¼›å¦‚æœ start_new_session ä¸ºçœŸå€¼åˆ™ setsid() ç³»ç»Ÿè°ƒç”¨å°†åœ¨æ‰§è¡Œå­è¿›ç¨‹ä¹‹å‰åœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œ</span></span><br><span class="line">    pass_fds=(), <span class="comment"># æ˜¯ä¸€ä¸ªå¯é€‰çš„åœ¨çˆ¶å­è¿›ç¨‹é—´ä¿æŒæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦åºåˆ—ã€‚æä¾›ä»»ä½• pass_fds å°†å¼ºåˆ¶ close_fds ä¸º True</span></span><br><span class="line">    *, </span><br><span class="line">    group=<span class="literal">None</span>, <span class="comment">#ï¼ˆä»… POSIXï¼‰: å¦‚æœ group ä¸ä¸º Noneï¼Œåˆ™ setregid() ç³»ç»Ÿè°ƒç”¨å°†äºå­è¿›ç¨‹æ‰§è¡Œä¹‹å‰åœ¨ä¸‹çº§è¿›ç¨‹ä¸­è¿›è¡Œã€‚ å¦‚æœæ‰€æä¾›çš„å€¼ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†é€šè¿‡ grp.getgrnam() æ¥æŸ¥æ‰¾å®ƒï¼Œå¹¶å°†ä½¿ç”¨ gr_gid ä¸­çš„å€¼ã€‚ å¦‚æœè¯¥å€¼ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œå®ƒå°†è¢«åŸæ ·ä¼ é€’</span></span><br><span class="line">    extra_groups=<span class="literal">None</span>, <span class="comment"># ï¼ˆä»… POSIXï¼‰: å¦‚æœ extra_groups ä¸ä¸º Noneï¼Œåˆ™ setgroups() ç³»ç»Ÿè°ƒç”¨å°†äºå­è¿›ç¨‹ä¹‹å‰åœ¨ä¸‹çº§è¿›ç¨‹ä¸­è¿›è¡Œã€‚ åœ¨ extra_groups ä¸­æä¾›çš„å­—ç¬¦ä¸²å°†é€šè¿‡ grp.getgrnam() æ¥æŸ¥æ‰¾ï¼Œå¹¶å°†ä½¿ç”¨ gr_gid ä¸­çš„å€¼ã€‚ æ•´æ•°å€¼å°†è¢«åŸæ ·ä¼ é€’</span></span><br><span class="line">    user=<span class="literal">None</span>, <span class="comment"># ä»… POSIXï¼‰: å¦‚æœ user ä¸ä¸º Noneï¼Œåˆ™ setreuid() ç³»ç»Ÿè°ƒç”¨å°†äºå­è¿›ç¨‹æ‰§è¡Œä¹‹å‰åœ¨ä¸‹çº§è¿›ç¨‹ä¸­è¿›è¡Œã€‚ å¦‚æœæ‰€æä¾›çš„å€¼ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†é€šè¿‡ pwd.getpwnam() æ¥æŸ¥æ‰¾å®ƒï¼Œå¹¶å°†ä½¿ç”¨ pw_uid ä¸­çš„å€¼ã€‚ å¦‚æœè¯¥å€¼ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œå®ƒå°†è¢«åŸæ ·ä¼ é€’</span></span><br><span class="line">    umask=- <span class="number">1</span>, <span class="comment"># å¦‚æœ umask ä¸ä¸ºè´Ÿå€¼ï¼Œåˆ™ umask() ç³»ç»Ÿè°ƒç”¨å°†åœ¨å­è¿›ç¨‹æ‰§è¡Œä¹‹å‰åœ¨ä¸‹çº§è¿›ç¨‹ä¸­è¿›è¡Œ</span></span><br><span class="line">    encoding=<span class="literal">None</span>,  <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    errors=<span class="literal">None</span>,  <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    text=<span class="literal">None</span>,  <span class="comment"># åŒrun()æ–¹æ³•</span></span><br><span class="line">    pipesize=- <span class="number">1</span>, <span class="comment"># å½“ PIPE è¢«ç”¨ä½œ stdin, stdout æˆ– stderr æ—¶ pipesize å¯è¢«ç”¨äºæ”¹å˜ç®¡é“çš„å¤§å°ã€‚ ç®¡é“çš„å¤§å°ä»…ä¼šåœ¨å—æ”¯æŒçš„å¹³å°ä¸Šè¢«æ”¹å˜ï¼ˆå½“æ’°å†™æœ¬æ–‡æ¡£æ—¶åªæœ‰ Linux æ”¯æŒï¼‰</span></span><br><span class="line">    process_group=<span class="literal">None</span> <span class="comment"># ç”¨äºä»£æ›¿ä½¿ç”¨ preexec_fn çš„ä»£ç æ¥åœ¨å­è¿›ç¨‹ä¸­è°ƒç”¨ os.setsid() æˆ– os.setpgid()ï¼›å¦‚æœ start_new_session ä¸ºçœŸå€¼åˆ™ setsid() ç³»ç»Ÿè°ƒç”¨å°†åœ¨æ‰§è¡Œå­è¿›ç¨‹ä¹‹å‰åœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œ</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="é‡è¦å±æ€§-Popenå¯¹è±¡"><a href="#é‡è¦å±æ€§-Popenå¯¹è±¡" class="headerlink" title="é‡è¦å±æ€§-Popenå¯¹è±¡"></a>é‡è¦å±æ€§-Popenå¯¹è±¡</h3><p><a target="_blank" rel="noopener" href="https://cdn.nlark.com/yuque/0/2024/png/2130981/1705050956201-09e1da8f-a825-401c-ae20-e67a90f633e8.png#averageHue=%23474645&clientId=u0bfed3c2-e7cc-4&from=paste&height=150&id=u92fe8a26&originHeight=150&originWidth=850&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9909&status=done&style=none&taskId=ude3c6d9e-c5fa-4a36-b297-495f76a1fd4&title=&width=850" title="image.png" class="gallery-item" style="box-shadow: none;"> <img src="https://cdn.nlark.com/yuque/0/2024/png/2130981/1705050956201-09e1da8f-a825-401c-ae20-e67a90f633e8.png#averageHue=%23474645&clientId=u0bfed3c2-e7cc-4&from=paste&height=150&id=u92fe8a26&originHeight=150&originWidth=850&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9909&status=done&style=none&taskId=ude3c6d9e-c5fa-4a36-b297-495f76a1fd4&title=&width=850" alt="image.png"></a></p>
<ul>
<li>Popen.<strong>communicate</strong>(<em>input&#x3D;None</em>, <em>timeout&#x3D;None</em>)<ul>
<li>ä¸è¿›ç¨‹äº¤äº’ï¼šå°†æ•°æ®å‘é€åˆ° stdinã€‚ ä» stdout å’Œ stderr è¯»å–æ•°æ®ï¼Œç›´åˆ°æŠµè¾¾æ–‡ä»¶ç»“å°¾ã€‚ ç­‰å¾…è¿›ç¨‹ç»ˆæ­¢å¹¶è®¾ç½® <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.Popen.returncode">returncode</a> å±æ€§ï¼Œå¯é€‰çš„ <em>input</em> å‚æ•°åº”ä¸ºè¦å‘é€åˆ°ä¸‹çº§è¿›ç¨‹çš„æ•°æ®ï¼Œæˆ–è€…å¦‚æœæ²¡æœ‰è¦å‘é€åˆ°ä¸‹çº§è¿›ç¨‹çš„æ•°æ®åˆ™ä¸º Noneã€‚ å¦‚æœæµæ˜¯ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€çš„ï¼Œåˆ™ <em>input</em> å¿…é¡»ä¸ºå­—ç¬¦ä¸²ã€‚ åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå®ƒå¿…é¡»ä¸ºå­—èŠ‚ä¸²ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.Popen.communicate">communicate()</a> è¿”å›ä¸€ä¸ª (stdout_data, stderr_data) å…ƒç»„ã€‚å¦‚æœæ–‡ä»¶ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€åˆ™ä¸ºå­—ç¬¦ä¸²ï¼›å¦åˆ™å­—èŠ‚ã€‚</li>
</ul>
</li>
<li>Popen.<strong>poll</strong>()<ul>
<li>æ£€æŸ¥å­è¿›ç¨‹æ˜¯å¦å·²è¢«ç»ˆæ­¢ã€‚è®¾ç½®å¹¶è¿”å› <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.Popen.returncode">returncode</a> å±æ€§ã€‚å¦åˆ™è¿”å› Noneã€‚</li>
</ul>
</li>
<li>Popen.<strong>wait</strong>(<em>timeout&#x3D;None</em>)<ul>
<li>ç­‰å¾…å­è¿›ç¨‹è¢«ç»ˆæ­¢ã€‚è®¾ç½®å¹¶è¿”å› <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.Popen.returncode">returncode</a> å±æ€§ã€‚</li>
</ul>
</li>
<li>Popen.<strong>send_signal</strong>(<em>signal</em>)<ul>
<li>å°†ä¿¡å· <em>signal</em> å‘é€ç»™å­è¿›ç¨‹ï¼Œå¦‚SIGINTã€SIGTERMç­‰</li>
</ul>
</li>
</ul>
<h3 id="ä½¿ç”¨ç¤ºä¾‹-1"><a href="#ä½¿ç”¨ç¤ºä¾‹-1" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><ul>
<li>åŸºæœ¬æ“ä½œ</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: res = subprocess.Popen(<span class="string">&quot;sleep 10 &amp;&amp; pwd&quot;</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: res</span><br><span class="line">Out[<span class="number">3</span>]: &lt;Popen: returncode: <span class="literal">None</span> args: <span class="string">&#x27;sleep 10 &amp;&amp; pwd&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: res.stdout</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: res.stdout</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: /data/sswang/subprocess_demo</span><br><span class="line">In [<span class="number">7</span>]: </span><br></pre></td></tr></table></figure>

<ul>
<li>æ¡ˆä¾‹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ä½¿ç”¨subprocessçš„Popenæ¥æ‰§è¡Œshellå‘½ä»¤ï¼Œè¿™ç§æ–¹å¼ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥æ‰§è¡Œshell</span></span><br><span class="line"><span class="string">ä½¿ç”¨è¦æ”¾åœ¨åå°ä¸€ç›´æ‰§è¡Œçš„shellè¿›ç¨‹ï¼Œæ¯”å¦‚é€šè¿‡shellå¯åŠ¨æŸç§æœåŠ¡ï¼Œå¦‚æœé€šè¿‡ä¸Šé¢</span></span><br><span class="line"><span class="string">çš„æ–¹å¼ï¼Œå°±ä¼šé‡åˆ°å½“pythonè¢«å…³é—­æ—¶ï¼Œshellå¯åŠ¨çš„ç¨‹åºä¹Ÿè¢«å…³é—­</span></span><br><span class="line"><span class="string">éœ€è¦æ³¨æ„çš„æ˜¯close_fdså‚æ•°ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºç»§æ‰¿fbï¼Œå³æ–‡ä»¶èµ„æºç¬¦ï¼Œå¦‚æœç»§æ‰¿fbï¼Œé‚£ä¹ˆå½“çˆ¶è¿›ç¨‹å…³é—­æ—¶</span></span><br><span class="line"><span class="string">shellå¯åŠ¨çš„å­è¿›ç¨‹ä¼šå»ç»§æ‰¿çˆ¶è¿›ç¨‹ç›¸åº”çš„èµ„æºï¼Œå¦‚Flask webæœåŠ¡ä¸­é€šè¿‡shellå¯åŠ¨äº†æŸä¸ªæœåŠ¡ï¼Œæ­¤æ—¶Flaskå…³é—­äº†</span></span><br><span class="line"><span class="string">ä½†åŸæœ¬Flaskç›‘å¬çš„ç«¯å£ä¾æ—§ä¼šè¢«shellå­è¿›ç¨‹å ç”¨ï¼Œè¿™æ ·å°±å¯¼è‡´Flaskæ— æ³•å†æ¬¡å¯åŠ¨ã€‚</span></span><br><span class="line"><span class="string">å°†close_fdsè®¾ç½®ä¸ºfalseå¯ä»¥é¿å…è¿™ç§æƒ…å†µ</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">execshell2</span>(<span class="params">self,shell</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        p = subprocess.Popen(shell, shell=<span class="literal">True</span>,stdout=subprocess.PIPE ,stderr=subprocess.STDOUT, close_fds=<span class="literal">True</span>)</span><br><span class="line">        output = p.stdout.read()</span><br><span class="line">        <span class="comment"># p.terminate()</span></span><br><span class="line">        code = <span class="number">0</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s execute success!&#x27;</span> % shell)</span><br><span class="line">    <span class="keyword">except</span> subprocess.CalledProcessError <span class="keyword">as</span> e:</span><br><span class="line">        code = e.returncode</span><br><span class="line">        output = e.output</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s execute error: exit_status [%s] err [%s]&#x27;</span> % (shell, <span class="built_in">str</span>(code), output))</span><br><span class="line">        exit()</span><br><span class="line">    <span class="keyword">return</span> code, output</span><br></pre></td></tr></table></figure>
<h2 id="subprocesså¸¸ç”¨å¼‚å¸¸ç±»"><a href="#subprocesså¸¸ç”¨å¼‚å¸¸ç±»" class="headerlink" title="subprocesså¸¸ç”¨å¼‚å¸¸ç±»"></a>subprocesså¸¸ç”¨å¼‚å¸¸ç±»</h2><h3 id="SubprocessError"><a href="#SubprocessError" class="headerlink" title="SubprocessError"></a>SubprocessError</h3><ul>
<li>æ­¤æ¨¡å—çš„å…¶ä»–å¼‚å¸¸</li>
</ul>
<h3 id="TimeoutExpired"><a href="#TimeoutExpired" class="headerlink" title="TimeoutExpired"></a>TimeoutExpired</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.SubprocessError">SubprocessError</a> çš„å­ç±»ï¼Œç­‰å¾…å­è¿›ç¨‹çš„è¿‡ç¨‹ä¸­å‘ç”Ÿè¶…æ—¶æ—¶è¢«æŠ›å‡º</li>
</ul>
<h3 id="CalledProcessError"><a href="#CalledProcessError" class="headerlink" title="CalledProcessError"></a>CalledProcessError</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.SubprocessError">SubprocessError</a> çš„å­ç±»ï¼Œå½“ä¸€ä¸ªç”± <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.check_call">check_call()</a>, <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.check_output">check_output()</a> æˆ– <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.12/library/subprocess.html#subprocess.run">run()</a> (é™„å¸¦ check&#x3D;True) è¿è¡Œçš„è¿›ç¨‹è¿”å›äº†éé›¶é€€å‡ºçŠ¶æ€ç æ—¶å°†è¢«å¼•å‘</li>
</ul>
<h2 id="å®è·µæ¡ˆä¾‹"><a href="#å®è·µæ¡ˆä¾‹" class="headerlink" title="å®è·µæ¡ˆä¾‹"></a>å®è·µæ¡ˆä¾‹</h2><ul>
<li><strong>éœ€æ±‚ï¼šä½¿ç”¨typer+subprocesså®ç°äº†ä¸€ä¸ªç”¨äºç®¡ç†é¡¹ç›®ä¾èµ–å’Œæ‰§è¡Œä¸€äº›å¸¸è§ä»»åŠ¡çš„è„šæœ¬çš„å·¥å…·ã€‚</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UpgradeDependencies</span>:</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_build_args</span>(<span class="params">cls, dependencies</span>):</span><br><span class="line">        <span class="comment"># è§£æä¾èµ–é¡¹å¹¶æ„å»ºå‚æ•°</span></span><br><span class="line">        packs, specials = [], &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> dep <span class="keyword">in</span> dependencies:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&quot;:&quot;</span> <span class="keyword">in</span> dep:</span><br><span class="line">                k, v = dep.split(<span class="string">&quot;:&quot;</span>)</span><br><span class="line">                specials[k.strip()] = v.strip().split()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                packs.append(dep.strip())</span><br><span class="line">        <span class="keyword">return</span> packs, specials</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_parse_dependencies</span>(<span class="params">cls, text, title</span>):</span><br><span class="line">        <span class="comment"># ä»æ–‡æœ¬ä¸­è§£æä¾èµ–é¡¹</span></span><br><span class="line">        main, dev = text.split(title)</span><br><span class="line">        devs = dev.split(<span class="string">&quot;[tool.&quot;</span>)[<span class="number">0</span>].strip().splitlines()</span><br><span class="line">        mains = main.strip().splitlines()</span><br><span class="line">        prod_packs, specials = cls._build_args(mains)</span><br><span class="line">        dev_packs, specials = cls._build_args(devs)</span><br><span class="line">        <span class="keyword">return</span> prod_packs, dev_packs, specials</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_args</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># è·å–ä¾èµ–é¡¹å‚æ•°</span></span><br><span class="line">        dev_title = <span class="string">&quot;[tool.poetry.group.dev.dependencies]&quot;</span></span><br><span class="line">        dev_flag = <span class="string">&quot;--group dev&quot;</span></span><br><span class="line">        main_args, dev_args, others = [], [], []</span><br><span class="line">        <span class="keyword">if</span> dev_title <span class="keyword">in</span> text:</span><br><span class="line">            main_title = <span class="string">&quot;[tool.poetry.dependencies]&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dev_flag = <span class="string">&quot;--group dev&quot;</span></span><br><span class="line">            dev_title = <span class="string">&quot;[tool.poetry.group.dev.dependencies]&quot;</span></span><br><span class="line">        main_args, dev_args, others = cls._parse_dependencies(text, main_title, dev_title, dev_flag)</span><br><span class="line">        <span class="keyword">return</span> main_args, dev_args, others, dev_flag</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">gen_cmd</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># ç”Ÿæˆå‡çº§ä¾èµ–é¡¹çš„å‘½ä»¤</span></span><br><span class="line">        main_args, dev_args, others, dev_flag = cls.get_args()</span><br><span class="line">        command = <span class="string">f&quot;poetry add <span class="subst">&#123;<span class="string">&#x27; &#x27;</span>.join(main_args)&#125;</span> &amp;&amp; poetry add <span class="subst">&#123;dev_flag&#125;</span> <span class="subst">&#123;<span class="string">&#x27; &#x27;</span>.join(dev_args)&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">for</span> packages <span class="keyword">in</span> others:</span><br><span class="line">            command += <span class="string">f&quot; &amp;&amp; poetry add <span class="subst">&#123;<span class="string">&#x27; &#x27;</span>.join(packages)&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">return</span> command</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">exit_if_run_failed</span>(<span class="params">cmd</span>):</span><br><span class="line">    <span class="comment"># å¦‚æœè¿è¡Œå‘½ä»¤å¤±è´¥ï¼Œåˆ™é€€å‡º</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        subprocess.run(cmd, check=<span class="literal">True</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">except</span> subprocess.CalledProcessError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å‡çº§æ‰€æœ‰ä¾èµ–åŒ…åˆ°æœ€æ–°ç‰ˆ&quot;&quot;&quot;</span></span><br><span class="line">    exit_if_run_failed(UpgradeDependencies.gen_cmd())</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lint</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ ¼å¼åŒ–åŠ é™æ€æ£€æŸ¥&quot;&quot;&quot;</span></span><br><span class="line">    remove_imports = <span class="string">&quot;autoflake --in-place --remove-all-unused-imports&quot;</span></span><br><span class="line">    cmd = <span class="string">&quot;&quot;</span></span><br><span class="line">    paths = <span class="string">&quot;.&quot;</span></span><br><span class="line">    <span class="keyword">if</span> args := sys.argv[<span class="number">1</span>:]:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;-r&quot;</span> <span class="keyword">in</span> args:</span><br><span class="line">            args.remove(<span class="string">&quot;-r&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">all</span>(Path(i).is_file() <span class="keyword">for</span> i <span class="keyword">in</span> args):</span><br><span class="line">                cmd = <span class="string">f&quot;<span class="subst">&#123;remove_imports&#125;</span> <span class="subst">&#123;paths&#125;</span> &amp;&amp; &quot;</span> + cmd</span><br><span class="line">        paths = <span class="string">&quot; &quot;</span>.join(args)</span><br><span class="line">    tools = (<span class="string">&quot;isort&quot;</span>, <span class="string">&quot;black&quot;</span>, <span class="string">&quot;ruff&quot;</span>, <span class="string">&quot;mypy&quot;</span>)</span><br><span class="line">    cmd += <span class="string">f&quot;poetry run <span class="subst">&#123;tools[<span class="number">0</span>]&#125;</span> <span class="subst">&#123;paths&#125;</span> &amp;&amp; poetry run <span class="subst">&#123;tools[<span class="number">1</span>]&#125;</span> <span class="subst">&#123;paths&#125;</span> &amp;&amp; poetry run <span class="subst">&#123;tools[<span class="number">2</span>]&#125;</span> <span class="subst">&#123;paths&#125;</span> &amp;&amp; poetry run <span class="subst">&#123;tools[<span class="number">3</span>]&#125;</span> <span class="subst">&#123;paths&#125;</span>&quot;</span></span><br><span class="line">    exit_if_run_failed(cmd)</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dev</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å¯åŠ¨æœåŠ¡ï¼šç›¸å½“äºdjangoçš„runserver&quot;&quot;&quot;</span></span><br><span class="line">    cmd = <span class="string">&quot;poetry run python main.py&quot;</span></span><br><span class="line">    <span class="keyword">if</span> args := sys.argv[<span class="number">1</span>:]:</span><br><span class="line">        cmd += <span class="string">&quot; &quot;</span> + <span class="string">&quot; &quot;</span>.join(args)</span><br><span class="line">    exit_if_run_failed(cmd)</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">makemigrations</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç”Ÿæˆæ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼Œç±»ä¼¼Djangoçš„./manage.py makemigrations&quot;&quot;&quot;</span></span><br><span class="line">    exit_if_run_failed(<span class="string">&quot;aerich migrate&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">migrate</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ›´æ–°æ•°æ®åº“è¡¨ç»“æ„ï¼šç›¸å½“äºdjangoçš„./manage.py migrate&quot;&quot;&quot;</span></span><br><span class="line">    exit_if_run_failed(<span class="string">&quot;aerich upgrade&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    cli()  <span class="comment"># Assuming you have defined `cli` somewhere</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2025-03-04</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« sswfive</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/python%E5%BA%93/'>
                            pythonåº“
                        </a>
                    
                        <a href='/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/'>
                            è¿›ç¨‹ç®¡ç†
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/Python/'>
                            Python
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='/2025/03/04/11-pathlib/'>æ–‡ä»¶è·¯å¾„ç®¡ç†å·¥å…·ä¹‹pathlib</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/2025/03/04/09-supervisor/">è¿›ç¨‹ç®¡ç†å·¥å…·ä¹‹Supervisor</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 2019ï½2025 China 

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠçœ‹è¿‡å¤§æµ·çš„äººä¸ä¼šå¿˜è®°æµ·çš„å¹¿é˜”ğŸŒŠ</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
            
    </body>
</html>